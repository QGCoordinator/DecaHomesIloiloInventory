<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Housing Projects Management</title>
    <style>
        /* Add your styles here as per your original requirements */
        /* Example of basic login styles */
        .login-container {
            max-width: 350px;
            margin: 100px auto;
            padding: 30px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .login-input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .login-btn {
            width: 100%;
            padding: 12px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .error-message {
            color: #f44336;
            margin: 10px 0;
            display: none;
        }
        /* Style for other elements will follow here... */
    </style>
</head>
<body>

<!-- Login Section -->
<div id="login-section">
    <div class="login-container">
        <h2>Login</h2>
        <div id="login-error" class="error-message">Invalid credentials</div>
        <input type="text" id="username" class="login-input" placeholder="Username">
        <input type="password" id="password" class="login-input" placeholder="Password">
        <button onclick="login()" class="login-btn">Login</button>
    </div>
</div>

<!-- Main Content -->
<div id="content-section" class="hidden">
    <h2>Housing Projects Management
        <button onclick="logout()" style="float:right;" class="btn btn-delete">Logout</button>
    </h2>

    <!-- Tabs -->
    <div class="tabs">
        <button class="tab active" onclick="switchTab('projects-tab')">Inventory</button>
        <button class="tab" onclick="switchTab('calculator-tab')">Loan Calculator</button>
        <button class="tab" onclick="switchTab('bulletin-tab')">Sold Units</button>
        <button class="tab admin-only" onclick="switchTab('sales-tab')">Sales Report</button>
        <button class="tab admin-only" onclick="switchTab('users-tab')">User Management</button>
    </div>

    <!-- Projects Tab -->
    <div id="projects-tab" class="tab-content active">
        <div id="admin-controls" class="admin-only">
            <button onclick="showAddForm()" class="btn btn-edit">Add New Entry</button>
            <button onclick="showManageEntries()" class="btn">Manage Entries</button>
            <button onclick="saveData()" class="btn">Save All Data</button>
            <button onclick="exportToCSV()" class="btn">Export to CSV</button>
            <button onclick="syncWithGoogleSheets()" class="btn">Sync with Google Sheets</button>
        </div>

        <div id="add-form" class="admin-only hidden form-container">
            <h3>Add/Edit Inventory Entry</h3>
            <form id="inventory-form">
                <div class="form-row">
                    <input type="text" id="form-project" placeholder="Project" required>
                    <input type="text" id="form-site" placeholder="Site" required>
                    <input type="text" id="form-unit-type" placeholder="Unit Type" required>
                    <input type="text" id="form-block" placeholder="Block" required>
                    <input type="text" id="form-lt" placeholder="Lot" required>
                    <input type="number" id="form-lot-area" placeholder="Lot Area">
                    <input type="text" id="form-house-type" placeholder="House Type">
                    <input type="number" id="form-contract-price" placeholder="Contract Price">
                    <input type="number" id="form-pc1" placeholder="PC1">
                    <input type="number" id="form-pc2" placeholder="PC2">
                    <input type="number" id="form-too" placeholder="TOO">
                    <input type="number" id="form-dp" placeholder="DP">
                    <input type="number" id="form-reservation-fee" placeholder="Reservation Fee">
                    <input type="number" id="form-equity-promo" placeholder="Equity Promo">
                    <input type="number" id="form-equity-payment" placeholder="Equity Payment">
                    <input type="number" id="form-term" placeholder="Term">
                    <input type="number" id="form-monthly-equity" placeholder="Monthly Equity">
                    <input type="number" id="form-loan-amount" placeholder="Loan Amount">
                    <input type="number" id="form-ma-hdmf" placeholder="MA (HDMF)">
                    <input type="number" id="form-gmi-hdmf" placeholder="GMI (HDMF)">
                    <input type="number" id="form-ma-bdo" placeholder="MA (BDO)">
                    <input type="number" id="form-gmi-bdo" placeholder="GMI (BDO)">
                    <input type="number" id="form-ma-rcbc" placeholder="MA (RCBC)">
                    <input type="number" id="form-gmi-rcbc" placeholder="GMI (RCBC)">
                    <select id="form-status">
                        <option value="available">Available</option>
                        <option value="with-folder">With Folder</option>
                        <option value="sold">Sold</option>
                    </select>
                    <select id="form-hidden">
                        <option value="false">No</option>
                        <option value="true">Yes</option>
                    </select>
                    <button type="button" onclick="saveEntry()">Save Entry</button>
                    <button type="button" onclick="cancelEdit()">Cancel</button>
                </div>
            </form>
        </div>

        <table id="inventory-table">
            <thead>
                <tr>
                    <th>Project</th>
                    <th>Site</th>
                    <th>Unit Type</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="inventory-body">
                <!-- Inventory data will be populated here -->
            </tbody>
        </table>
    </div>

    <!-- Calculator Tab -->
    <div id="calculator-tab" class="tab-content">
        <h3>Loan Calculator</h3>
        <form id="calculator-form">
            <input type="number" id="calc-loan-amount" placeholder="Loan Amount">
            <input type="number" id="calc-interest-rate" placeholder="Interest Rate">
            <input type="number" id="calc-loan-term" placeholder="Loan Term (Years)">
            <button type="button" onclick="calculateLoan()">Calculate</button>
        </form>
        <div id="calculator-results"></div>
    </div>

    <!-- Google Sheets Integration -->
    <div id="google-sheets-sync-status" class="hidden">
        <p>Syncing with Google Sheets...</p>
    </div>
</div>

<script>
// Google Sheets API URL (Replace with your actual API endpoint)
const GOOGLE_SHEETS_API_URL = "https://script.google.com/macros/s/YOUR_GOOGLE_SHEETS_API_ENDPOINT";

// Dummy data for inventory (for testing)
let inventory = [
    {
        project: "Project 1",
        site: "Site A",
        unitType: "Type A",
        status: "available"
    }
];

// Handle login
function login() {
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();
    const errorElement = document.getElementById("login-error");

    errorElement.style.display = "none";

    if (username === "admin" && password === "password") {
        showContent();
    } else {
        errorElement.textContent = "Invalid credentials";
        errorElement.style.display = "block";
    }
}

// Show main content section after login
function showContent() {
    document.getElementById("login-section").style.display = "none";
    document.getElementById("content-section").style.display = "block";
    loadInventory();
}

// Logout function
function logout() {
    document.getElementById("login-section").style.display = "block";
    document.getElementById("content-section").style.display = "none";
}

// Switch between tabs
function switchTab(tabId) {
    document.querySelectorAll(".tab-content").forEach(tab => tab.style.display = "none");
    document.querySelectorAll(".tab").forEach(tab => tab.classList.remove("active"));

    document.getElementById(tabId).style.display = "block";
    document.querySelector(`.tab[onclick="switchTab('${tabId}')"]`).classList.add("active");
}

// Load inventory data
function loadInventory() {
    const tableBody = document.getElementById("inventory-body");
    tableBody.innerHTML = '';

    inventory.forEach((item, index) => {
        const row = tableBody.insertRow();
        row.innerHTML = `
            <td>${item.project}</td>
            <td>${item.site}</td>
            <td>${item.unitType}</td>
            <td>${item.status}</td>
            <td>
                <button onclick="editEntry(${index})">Edit</button>
                <button onclick="deleteEntry(${index})">Delete</button>
            </td>
        `;
    });
}

// Add a new entry or edit an existing entry
function saveEntry() {
    const project = document.getElementById("form-project").value.trim();
    const site = document.getElementById("form-site").value.trim();
    const unitType = document.getElementById("form-unit-type").value.trim();
    const status = document.getElementById("form-status").value;
    const hiddenFromUsers = document.getElementById("form-hidden").value === "true";

    if (project && site && unitType) {
        const entry = {
            project: project,
            site: site,
            unitType: unitType,
            status: status,
            hiddenFromUsers: hiddenFromUsers
        };

        inventory.push(entry);
        loadInventory();
    } else {
        alert("Please fill in all required fields");
    }
}

// Delete an entry
function deleteEntry(index) {
    inventory.splice(index, 1);
    loadInventory();
}

// Edit an entry
function editEntry(index) {
    const entry = inventory[index];
    document.getElementById("form-project").value = entry.project;
    document.getElementById("form-site").value = entry.site;
    document.getElementById("form-unit-type").value = entry.unitType;
    document.getElementById("form-status").value = entry.status;
    document.getElementById("form-hidden").value = entry.hiddenFromUsers ? "true" : "false";
}

// Export to CSV
function exportToCSV() {
    let csv = "Project,Site,Unit Type,Status\n";
    inventory.forEach(item => {
        csv += `${item.project},${item.site},${item.unitType},${item.status}\n`;
    });

    const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
    const link = document.createElement("a");
    link.setAttribute("href", URL.createObjectURL(blob));
    link.setAttribute("download", "inventory.csv");
    link.click();
}

// Sync with Google Sheets
function syncWithGoogleSheets() {
    const statusElement = document.getElementById("google-sheets-sync-status");
    statusElement.style.display = "block";

    fetch(GOOGLE_SHEETS_API_URL, {
        method: 'POST',
        body: JSON.stringify({ inventory: inventory }),
        headers: { 'Content-Type': 'application/json' }
    })
    .then(response => response.json())
    .then(data => {
        statusElement.textContent = "Sync completed successfully!";
        setTimeout(() => statusElement.style.display = "none", 3000);
    })
    .catch(error => {
        statusElement.textContent = "Error syncing data: " + error.message;
    });
}
</script>

</body>
</html>
