<!DOCTYPE html>
<html>
<head>
    <title>Housing Projects Management - Inventory</title>
    <style>
        /* Main Styles */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .hidden { display: none; }
        .admin-only { display: none; }
        
        /* Table Styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
            font-size: 14px;
        }
        
        th {
            background-color: #4CAF50;
            color: white;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        tr:hover {
            background-color: #f1f1f1;
        }
        
        /* Status Badges */
        .status-badge {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            display: inline-block;
            min-width: 80px;
            text-align: center;
        }
        
        .status-available { background-color: #4CAF50; color: white; }
        .status-with-folder { background-color: #2196F3; color: white; }
        .status-sold { background-color: #f44336; color: white; }
        
        /* Button Styles */
        .btn {
            padding: 5px 10px;
            margin: 2px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }
        
        .btn:hover {
            opacity: 0.8;
            transform: translateY(-1px);
        }
        
        .btn-edit { background-color: #2196F3; color: white; }
        .btn-delete { background-color: #f44336; color: white; }
        .btn-hide-users { background-color: #607D8B; color: white; }
        
        /* Form Styles */
        .form-container {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .btn {
                display: block;
                margin: 5px 0;
                width: 100%;
            }
        }
    </style>
</head>
<body>

<div id="content-section">
    <h2>Housing Projects Inventory Management
        <button onclick="logout()" style="float:right;" class="btn btn-delete">Logout</button>
    </h2>
    
    <!-- Admin Controls -->
    <div id="admin-controls" class="admin-only">
        <button onclick="showAddForm()" class="btn btn-edit">Add New Entry</button>
        <button onclick="saveData()" class="btn">Save All Data</button>
        <button onclick="exportToCSV()" class="btn">Export to CSV</button>
    </div>
    
    <!-- Inventory Table -->
    <div style="overflow-x: auto;">
        <table id="inventory-table">
            <thead>
                <tr>
                    <th>Project</th>
                    <th>Site</th>
                    <th>Unit Type</th>
                    <th>Blk</th>
                    <th>Lt</th>
                    <th>Lot Area</th>
                    <th>House Type</th>
                    <th>Contract Price</th>
                    <th>Status</th>
                    <th class="admin-only">Actions</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be loaded here -->
            </tbody>
        </table>
    </div>
</div>

<script>
// Sample initial data
let inventory = [
    {
        project: "DHPRR1",
        site: "Iloilo City",
        unitType: "Townhouse",
        block: "A",
        lt: "15",
        lotArea: 120,
        houseType: "Model A",
        contractPrice: 1500000,
        status: "available"
    }
];

// Load inventory data from localStorage if available
if(localStorage.getItem("inventory")) {
    inventory = JSON.parse(localStorage.getItem("inventory"));
}

// Load inventory into table
function loadInventory() {
    const tbody = document.querySelector("#inventory-table tbody");
    tbody.innerHTML = "";
    
    inventory.forEach((entry, index) => {
        const row = tbody.insertRow();
        
        // Determine status badge class
        let statusClass = "";
        if(entry.status === "available") statusClass = "status-available";
        else if(entry.status === "with-folder") statusClass = "status-with-folder";
        else if(entry.status === "sold") statusClass = "status-sold";
        
        row.innerHTML = `
            <td>${entry.project}</td>
            <td>${entry.site}</td>
            <td>${entry.unitType}</td>
            <td>${entry.block}</td>
            <td>${entry.lt}</td>
            <td>${entry.lotArea}</td>
            <td>${entry.houseType}</td>
            <td>${formatNumber(entry.contractPrice)}</td>
            <td><span class="status-badge ${statusClass}">${entry.status.replace('-', ' ')}</span></td>
            <td class="admin-only">
                <button onclick="editEntry(${index})" class="btn btn-edit">Edit</button>
                <button onclick="deleteEntry(${index})" class="btn btn-delete">Delete</button>
                <button onclick="hideFromUsers(${index})" class="btn btn-hide-users">Hide Users</button>
            </td>
        `;
    });
}

// Format number with commas
function formatNumber(num) {
    return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

// Edit entry
function editEntry(index) {
    // Implementation would go here
    alert("Edit functionality for entry at index " + index);
}

// Delete entry
function deleteEntry(index) {
    if(confirm("Are you sure you want to delete this entry?")) {
        inventory.splice(index, 1);
        localStorage.setItem("inventory", JSON.stringify(inventory));
        loadInventory();
    }
}

// Hide from users
function hideFromUsers(index) {
    inventory[index].hiddenFromUsers = true;
    localStorage.setItem("inventory", JSON.stringify(inventory));
    loadInventory();
    alert("This entry will now be hidden from regular users");
}

// Save all data
function saveData() {
    localStorage.setItem("inventory", JSON.stringify(inventory));
    alert("All data saved successfully");
}

// Export to CSV
function exportToCSV() {
    // Implementation would go here
    alert("Export to CSV functionality");
}

// Logout function
function logout() {
    localStorage.removeItem("loggedIn");
    localStorage.removeItem("userRole");
    window.location.href = "index.html";
}

// Check if user is admin and show admin controls
if(localStorage.getItem("userRole") === "admin") {
    document.querySelectorAll(".admin-only").forEach(el => el.style.display = "block");
}

// Load inventory when page loads
document.addEventListener('DOMContentLoaded', function() {
    if(!localStorage.getItem("loggedIn")) {
        window.location.href = "index.html";
    } else {
        loadInventory();
    }
});
</script>
</body>
</html>
